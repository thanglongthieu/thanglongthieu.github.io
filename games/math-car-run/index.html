const fractionLine = document.getElementById('fractionLine');
const reducedFractionLine = document.getElementById('reducedFractionLine');
const decimalLine = document.getElementById('decimalLine');

// Greatest common divisor
function gcd(a, b) {
  a = Math.abs(a);
  b = Math.abs(b);
  while (b !== 0) {
    const t = b;
    b = a % b;
    a = t;
  }
  return a || 1;
}

function computeAndSimulate() {
  const distance = parseFloat(distanceInput.value);
  const speed1 = parseFloat(speed1Input.value); // v1
  const speed2 = parseFloat(speed2Input.value); // v2

  if (!(distance > 0 && speed1 > 0 && speed2 > 0)) {
    alert('Enter positive numbers for distance and both speeds.');
    return;
  }

  const sumSpeed = speed1 + speed2; // v1 + v2

  // 1) Show the algebra formula with numbers plugged in
  // t = distance / (v1 + v2) = 120 / (60 + 80)
  fractionLine.textContent =
    `t = distance / (v₁ + v₂) = ${distance} / (${speed1} + ${speed2})`;

  // 2) Show the fraction and the reduced fraction
  //    = 120/140 = 6/7 hours
  const g = gcd(distance, sumSpeed);
  const simpleN = distance / g;
  const simpleD = sumSpeed / g;

  reducedFractionLine.textContent =
    `= ${distance}/${sumSpeed} = ${simpleN}/${simpleD} hours`;

  // 3) Decimal value (optional but nice)
  const tHours = distance / sumSpeed;
  decimalLine.textContent = `≈ ${tHours.toFixed(4)} hours`;

  // 4) Convert to hours + minutes (if you still want to show this)
  const totalMinutes = tHours * 60;
  const hours = Math.floor(totalMinutes / 60);
  const minutes = totalMinutes % 60;
  timeLine.textContent =
    `Meeting time: ${hours} h ${minutes.toFixed(1)} min`;

  // 5) Distance each car travels (optional, can remove if not needed)
  const d1 = speed1 * tHours;
  const d2 = distance - d1;
  positionLine.textContent =
    `Position: Car1 traveled ${d1.toFixed(2)} km, Car2 traveled ${d2.toFixed(2)} km`;

  // 6) If you still use the animation
  meetTimeSeconds = tHours * 3600;
  startSimulation();
}
